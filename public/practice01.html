<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select name="cate1" id="cate1" onchange="genLevel2()">
      <!--
      <option value=""></option>
      -->
    </select>

    <select name="cate2" id="cate2">

    </select>


    <script>
      const cate1 = document.querySelector('#cate1')
      let data = [
        { sid: "1", name: "程式設計", parent_sid: "0" },
        { sid: "2", name: "繪圖軟體", parent_sid: "0" },
        { sid: "3", name: "網際網路應用", parent_sid: "0" },
        { sid: "4", name: "PHP", parent_sid: "1" },
        { sid: "5", name: "JavaScript", parent_sid: "1" },
        { sid: "7", name: "PS", parent_sid: "2" },
        { sid: "8", name: "Chrome", parent_sid: "3" },
        { sid: "9", name: "騙錢的", parent_sid: "3" },
        { sid: "10", name: "C++", parent_sid: "1" },
        { sid: "16", name: "椅拉", parent_sid: "2" },
      ];

      const cate1Val = '2';
      const cate2Val = '16';

      // 建立第一層選單 combobox

      let levelOne = data.filter((el) => el.parent_sid==='0');
      console.log(levelOne);
      cate1.innerHTML = 
        levelOne.map((el) => `<option value="${el.sid}">${el.name}</option>`).join('');

      cate1.value = cate1Val; //依據已儲存的資料產生第一層
      genLevel2();  // 產生第二層
      cate2.value = cate2Val;





      // 依據第一層的值去產生第二層
      function genLevel2(){
        const cate1_id = cate1.value;

        let level2 = data.filter((el) => el.parent_sid=== cate1_id );
        cate2.innerHTML = level2.map((el) => 
          `<option value="${el.sid}">${el.name}</option>`).join('');
      };
      genLevel2();

    </script>
  </body>
</html>
